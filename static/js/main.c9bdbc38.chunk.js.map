{"version":3,"sources":["drawCanvas.js","App.js","index.js"],"names":["drawCanvas","ctx","width","height","minR","maxR","minX","maxX","resolution","vertical","rstep","warmup","Math","pow","log","curr","r","pointsDrawn","tries","p","random","i","max","y","x","fillRect","timeout","ms","Promise","resolve","setTimeout","App","useState","draw","setDraw","mouseover","setMouseover","useQueryParams","withDefault","NumberParam","opacity","StringParam","animate","BooleanParam","drawWithWasm","scaleFactor","params","setParams","mouseDown","setMouseDown","mouseDownTime","setMouseDownTime","mouseCurr","setMouseCurr","loading","setLoading","wasm","setWasm","proportion","setProportion","forceUpdate","setTick","useCallback","tick","useForceUpdate","useEffect","a","console","error","factor","cancelled","Number","isNaN","getContext","getBoundingClientRect","fillStyle","iter","clearRect","x1","y1","x2","y2","style","margin","href","className","htmlFor","id","type","value","onChange","event","target","checked","disabled","toPrecision","onClick","toBlob","blob","saveAs","Date","now","position","ref","background","left","top","zIndex","onMouseDown","nativeEvent","offsetX","offsetY","onMouseMove","onMouseLeave","onMouseUp","min","newParams","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c9bdbc38.chunk.js","sourcesContent":["export default function* drawCanvas(\n  ctx,\n  width,\n  height,\n  minR,\n  maxR,\n  minX,\n  maxX,\n  resolution,\n  vertical\n) {\n  const rstep = (maxR - minR) / width;\n  const warmup = Math.pow(1.5, Math.log(1 / (maxR - minR))) * 1000;\n  for (let curr = 0; curr < width; curr++) {\n    yield curr + 1;\n    const r = curr * rstep + minR;\n    for (\n      let pointsDrawn = 0, tries = 0;\n      pointsDrawn < resolution && tries < 100;\n      tries++\n    ) {\n      let p = Math.random();\n      for (let i = 0; i < Math.max(warmup, 10000); i++) {\n        p = r * p * (1 - p);\n      }\n\n      if (vertical) {\n        for (let i = 0; i < 500; i++) {\n          const x = width * ((p - minX) / (maxX - minX));\n          const y = height * ((r - minR) / (maxR - minR));\n          if (x > 0 && x < width) {\n            ctx.fillRect(x, y, 0.7, 0.7);\n            pointsDrawn++;\n          }\n          p = r * p * (1 - p);\n        }\n      } else {\n        for (let i = 0; i < 500; i++) {\n          const y = height * ((p - minX) / (maxX - minX));\n          const x = width * ((r - minR) / (maxR - minR));\n          if (y > 0 && y < height) {\n            ctx.fillRect(x, y, 0.7, 0.7);\n            pointsDrawn++;\n          }\n          p = r * p * (1 - p);\n        }\n      }\n    }\n  }\n}\n","/* eslint-disable no-unused-vars */\nimport \"./App.css\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport {\n  BooleanParam,\n  NumberParam,\n  StringParam,\n  useQueryParams,\n  withDefault,\n} from \"use-query-params\";\nimport drawCanvas from \"./drawCanvas\";\nimport saveAs from \"file-saver\";\n\nfunction timeout(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function useForceUpdate() {\n  const [, setTick] = useState(0);\n  const update = useCallback(() => {\n    setTick((tick) => tick + 1);\n  }, []);\n  return update;\n}\n\nfunction App() {\n  const [draw, setDraw] = useState();\n  const [mouseover, setMouseover] = useState();\n  const [params, setParams] = useQueryParams({\n    minX: withDefault(NumberParam, 0),\n    maxX: withDefault(NumberParam, 1),\n    minR: withDefault(NumberParam, 2),\n    maxR: withDefault(NumberParam, 4),\n    opacity: withDefault(StringParam, \"0.3\"),\n    resolution: withDefault(StringParam, \"1000\"),\n    animate: withDefault(BooleanParam, true),\n    drawWithWasm: withDefault(BooleanParam, false),\n    vertical: withDefault(BooleanParam, false),\n    scaleFactor: withDefault(StringParam, \"2\"),\n  });\n  const [mouseDown, setMouseDown] = useState();\n  const [mouseDownTime, setMouseDownTime] = useState();\n  const [mouseCurr, setMouseCurr] = useState();\n  const [loading, setLoading] = useState(true);\n  const [wasm, setWasm] = useState();\n  const [proportion, setProportion] = useState(0);\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const wasm = await import(\"workspace-a\");\n        setWasm(wasm);\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n  }, []);\n  const {\n    drawWithWasm,\n    minX,\n    maxX,\n    minR,\n    maxR,\n    opacity,\n    resolution,\n    animate,\n    vertical,\n    scaleFactor,\n  } = params;\n  const factor = +scaleFactor;\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      if (\n        wasm &&\n        !Number.isNaN(factor) &&\n        !Number.isNaN(+opacity) &&\n        !Number.isNaN(+resolution)\n      ) {\n        if (!draw) {\n          return;\n        }\n        const ctx = draw.getContext(\"2d\");\n        if (!ctx) {\n          return;\n        }\n        const { width, height } = draw.getBoundingClientRect();\n        draw.width = width * factor;\n        draw.height = height * factor;\n\n        setLoading(true);\n        setProportion(0);\n        setTimeout(async () => {\n          ctx.fillStyle = \"white\";\n          ctx.fillRect(0, 0, width * factor, height * factor);\n          ctx.fillStyle = `rgba(0,0,0,${+opacity})`;\n          if (drawWithWasm) {\n            wasm.draw(\n              ctx,\n              width * factor,\n              height * factor,\n              minR,\n              maxR,\n              minX,\n              maxX,\n              +resolution,\n              vertical\n            );\n          } else {\n            for (const iter of drawCanvas(\n              ctx,\n              width * factor,\n              height * factor,\n              minR,\n              maxR,\n              minX,\n              maxX,\n              +resolution,\n              vertical\n            )) {\n              if (animate) {\n                setProportion(iter / (width * factor));\n                await timeout(1);\n              }\n              if (cancelled) {\n                break;\n              }\n            }\n          }\n\n          //if !cancelled seems to be a race condition?\n          if (!cancelled) {\n            setLoading(false);\n            setProportion(0);\n          }\n        }, 100);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [\n    minR,\n    maxR,\n    minX,\n    maxX,\n    factor,\n    vertical,\n    animate,\n    drawWithWasm,\n    opacity,\n    resolution,\n    draw,\n    wasm,\n  ]);\n\n  useEffect(() => {\n    if (!mouseover) {\n      return;\n    }\n    const ctx = mouseover.getContext(\"2d\");\n    if (!ctx) {\n      return;\n    }\n    const { width, height } = mouseover.getBoundingClientRect();\n    mouseover.width = width;\n    mouseover.height = height;\n    if (mouseDown) {\n      ctx.clearRect(0, 0, width, height);\n      const [x1, y1] = mouseDown;\n      const [x2, y2] = mouseCurr;\n      ctx.fillStyle = \"rgba(255,0,0,0.3)\";\n      ctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n    }\n  }, [mouseDown, mouseCurr, mouseover]);\n\n  return (\n    <div style={{ margin: 20 }}>\n      <h1>\n        <a href=\"https://github.com/cmdcolin/logistic_chaos_map\">\n          f(x)=rx(x-1)\n        </a>\n      </h1>\n      <p>\n        The function above is iterated for values of r between [2,4] and x\n        between [0,1] and points. Click and drag a region to zoom in. The\n        program iterates until it draws N points in the zoomed in region, which\n        results in higher computation time at zoomed in values. When zoomed in,\n        it has to iterate the logistic map longer to find that many points to\n        draw resulting in it being slower when zoomed in. The scale factor makes\n        the canvas size larger, allowing the code to render higher resolution\n        (larger) images.\n      </p>\n      <div className=\"controls\">\n        <div className=\"block\">\n          <label htmlFor=\"opacity\">Opacity</label>\n          <input\n            id=\"opacity\"\n            type=\"text\"\n            value={opacity}\n            onChange={(event) => {\n              setParams({ ...params, opacity: event.target.value });\n              forceUpdate();\n            }}\n          />\n        </div>\n        <div className=\"block\">\n          <label htmlFor=\"resolution\">N</label>\n          <input\n            id=\"resolution\"\n            type=\"text\"\n            value={resolution}\n            onChange={(event) => {\n              setParams({ ...params, resolution: event.target.value });\n              forceUpdate();\n            }}\n          />\n        </div>\n        <div className=\"block\">\n          <label htmlFor=\"scalefactor\">Scale factor</label>\n          <input\n            id=\"scalefactor\"\n            type=\"text\"\n            value={scaleFactor}\n            onChange={(event) => {\n              setParams({ ...params, scaleFactor: event.target.value });\n              forceUpdate();\n            }}\n          />\n        </div>\n\n        <div className=\"block\">\n          <label htmlFor=\"wasm\">Draw with WASM</label>\n          <input\n            id=\"wasm\"\n            type=\"checkbox\"\n            checked={drawWithWasm}\n            onChange={(event) => {\n              setParams({ ...params, drawWithWasm: event.target.checked });\n              forceUpdate();\n            }}\n          />\n        </div>\n        <div className=\"block\">\n          <label htmlFor=\"vertical\">Vertical</label>\n          <input\n            id=\"vertical\"\n            type=\"checkbox\"\n            checked={vertical}\n            onChange={(event) => {\n              setParams({ ...params, vertical: event.target.checked });\n              forceUpdate();\n            }}\n          />\n        </div>\n        {!drawWithWasm ? (\n          <div className=\"block\">\n            <label htmlFor=\"animate\">Animate?</label>\n            <input\n              id=\"animate\"\n              disabled={drawWithWasm}\n              type=\"checkbox\"\n              checked={params.animate}\n              onChange={(event) => {\n                setParams({ ...params, animate: event.target.checked });\n                forceUpdate();\n              }}\n            />\n          </div>\n        ) : null}\n        <p>\n          {loading\n            ? `Loading...${\n                proportion ? (proportion * 100).toPrecision(3) + \"%\" : \"\"\n              }`\n            : null}\n        </p>\n        <button\n          onClick={() => {\n            draw.toBlob(function (blob) {\n              saveAs(blob, `logistic_map_${+Date.now()}.png`);\n            });\n          }}\n        >\n          Save as PNG\n        </button>\n\n        <button\n          onClick={() => {\n            setParams({\n              ...params,\n              minX: 0,\n              maxX: 1,\n              minR: 2,\n              maxR: 4,\n            });\n            forceUpdate();\n          }}\n        >\n          Reset\n        </button>\n      </div>\n      <div style={{ position: \"relative\" }}>\n        <canvas\n          ref={(ref) => setDraw(ref)}\n          style={{\n            background: \"white\",\n            width: \"100%\",\n            height: \"100vh\",\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n          }}\n        />\n        <canvas\n          style={{\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100vh\",\n            zIndex: 1000,\n          }}\n          ref={(ref) => setMouseover(ref)}\n          onMouseDown={(event) => {\n            const { offsetX: x, offsetY: y } = event.nativeEvent;\n            setMouseDown([x, y]);\n            setMouseCurr([x, y]);\n          }}\n          onMouseMove={(event) => {\n            const { offsetX: x, offsetY: y } = event.nativeEvent;\n            if (mouseDown) {\n              setMouseCurr([x, y]);\n            }\n          }}\n          onMouseLeave={() => {\n            setMouseDown();\n            setMouseCurr();\n            setMouseDownTime(+Date.now());\n          }}\n          onMouseUp={() => {\n            if (+Date.now() - mouseDownTime > 100) {\n              console.log(\"t1\");\n              const x1 = Math.min(mouseDown[0], mouseCurr[0]);\n              const x2 = Math.max(mouseDown[0], mouseCurr[0]);\n              const y1 = Math.min(mouseDown[1], mouseCurr[1]);\n              const y2 = Math.max(mouseDown[1], mouseCurr[1]);\n              const { width, height } = mouseover.getBoundingClientRect();\n\n              const newParams = !vertical\n                ? {\n                    minR: ((maxR - minR) * x1) / width + minR,\n                    maxR: ((maxR - minR) * x2) / width + minR,\n                    minX: ((maxX - minX) * y1) / height + minX,\n                    maxX: ((maxX - minX) * y2) / height + minX,\n                  }\n                : {\n                    minR: ((maxR - minR) * y1) / height + minR,\n                    maxR: ((maxR - minR) * y2) / height + minR,\n                    minX: ((maxX - minX) * x1) / width + minX,\n                    maxX: ((maxX - minX) * x2) / width + minX,\n                  };\n              setParams({\n                ...params,\n                ...newParams,\n              });\n              forceUpdate();\n              setMouseDown();\n              setMouseCurr();\n            } else {\n              console.log(\"t2\");\n              setMouseDownTime();\n              setMouseDown();\n              setMouseCurr();\n            }\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport { QueryParamProvider } from \"use-query-params\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <QueryParamProvider>\n      <App />\n    </QueryParamProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}